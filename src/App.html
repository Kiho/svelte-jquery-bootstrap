<script>
	import { onDestroy, onMount } from 'svelte';
	import Router, { routes } from 'svelte-hash-router';
	import Nav from './Nav.html';
	import AboutPage from './pages/About.html';
	import ViewHeader from './components/ViewHeader.html';
	import Home from './pages/Home/index.html';
	import DepartmentPage from './pages/Department/index.html';
	import DepartmentEdit from './pages/Department/edit.html';
	import EmployeePage from './pages/Employee/index.html';
	import EmployeeEdit from './pages/Employee/edit.html';

	const pageHeader = new ViewHeader({
		target: document.querySelector('#page-header'),
	});

	const menu = [
		{ href: '/home', text: 'Home', icon: 'home' },
		{ href: '/departments', text: 'Departments', icon: 'sitemap' },
		{ href: '/employees', text: 'Employees', icon: 'users' },
		{ href: '/about', text: 'About', icon: 'leaf' },
	];

	// const router = createRouter({
	// 	'/': '/home',
	// 	'/home': Home,
	// 	'/departments': DepartmentPage,
	// 	'/departments/:id': DepartmentEdit,
	// 	'/about': AboutPage,
	// 	'/employees': EmployeePage,
	// 	'/employees/:id': EmployeeEdit,
	// });

	routes.set({
		'/': '/home',
		'/home': Home,
		'/departments': DepartmentPage,
		'/departments/:id': DepartmentEdit,
		'/about': AboutPage,
		'/employees': EmployeePage,
		'/employees/:id': EmployeeEdit,
	});

	const nav = new Nav({
		target: document.querySelector('#left-nav'),
		props: { menu }	
	});

	export let development = process.env.NODE_ENV !== 'production';
	// export let state = { };

	// onMount(() => {
	// 	router.start(window.location, window.document.querySelector('#content'), pageHeader, nav);
	// });

	// onDestroy(() => {
	// 	router.remove();
	// });
</script>

<Router />