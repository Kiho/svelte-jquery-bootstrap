<Panel loader="bar" bind:loading="loading" filled={{true}}>
    <form class="form-horizontal">   
        <Row>
            <Col md="4">
                <TextField
                    label="Employee #"
                    readOnly={true}
                    bind:value="item.id"
                    />
            </Col>
        </Row>
        <Row>
            <Col md="4">
                <TextField
                    label="Employee Name"
                    required={true}
                    bind:value="item.name"
                    />
            </Col>
        </Row>
        <Row>
            <Col md="4">
                <TextField
                    label="Title"
                    bind:value="item.title"
                    />
            </Col>
        </Row>
        <Row>
            <Col md="4">
                <SelectField label="Ddepartment"
                    bind:value="item.departmentId"
                    required={{true}}
                    optionList={{departmentList}}
                    getOptionName={{x => x.name}} />
            </Col>
        </Row>
        <Row>
            <Col md="4">
                <TextField
                    label="Rate"
                    pattern="-?[0-9]*(\.[0-9]+)?"
                    error="Input is not a number!"
                    bind:value="item.rate"
                    />
            </Col>
        </Row>        
        <Row className="formfoot">
            <Col md="4">
                <Col sm="3" />
                <Button color="primary" on:click="handleSubmit(event)">Submit</Button>
                <Button color="primary" on:click="handleBack(event)">Back</Button>
            </Col>
            <Col md="4">
                <!--<Spinner isActive={app.loading}/>-->
            </Col>
        </Row>
        <Row>
            <Col md="12">
                <!--<InvoiceTable rows={rows} actions={actions} className="mdl-color--white" width={this.width - 40}/>-->
            </Col>
        </Row> 
    </form>
</Panel>

<script>
    import Col from '../../components/Col.html';
    import Row from '../../components/Row.html';
    import Button from '../../components/Button.html';
    import TextField from '../../components/TextField.html';
    import SelectField from '../../components/SelectField.html';
    import StateZipField from '../../components/StateZipField.html';
    import Panel from '../../components/Panel.html';
    import Service from './service';

    const service = new Service();

    export default {
        data () {
            return { 
                item: {},
                header: {
					title: 'Employee',
					icon: 'home',
					viewPath: '<small>UI Elements<br>General<br> <span class="c-white">Typography</span></small>'
				},
                entityType: 'employee',
                id: 0,
                departmentList: [],
            }
        },
        components: {
            Col,
            Row,
            Button,
            Panel,
            TextField,
            StateZipField,
            SelectField,
        },
        oncreate() {
            service.init(this);
			service.initHeader(this);
            service.getLookups(this, ['department'])
                .then(() => {
                    console.log('Call getById');
                    service.getById(this);
                });
		},
		methods: {
            handleBack: service.handleBack,
            handleSubmit(e) {
                service.handleSubmit(e, this);
            }
		}
    };
</script>