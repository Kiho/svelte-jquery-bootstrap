<script>
  import { onMount } from 'svelte';

  export let form;

  import Col from '../../components/Col.html';
  import Row from '../../components/Row.html';
  import Button from '../../components/Button.html';
  import TextField from '../../components/TextField.html';
  import SelectField from '../../components/SelectField.html';
  import StateZipField from '../../components/StateZipField.html';
  import Panel from '../../components/Panel.html';
  import Service from './service';

  export let loading;
  export let item = {};
  export let header = {
    title: 'Department',
    icon: 'home',
    hidden: false,
    viewPath: '<small><span class="c-white">Department</span></small>'
  };

  export let entityType = 'department';
  export let id = 0;
  export let departmentList = [];
  export let employeeList = [];

  const app = { entityType, id, form, 
    setData: x => (item = x) };
  const service = new Service();

  onMount(() => {
    service.initHeader(app);
    service.getById(app);
  });

  // [svelte-upgrade suggestion]
  // review these functions and remove unnecessary 'export' keywords
  export function handleGoBack() {
    service.goBack();
  }

  export function handleSubmit(e) {
    service.submit(e, this);
  }
</script>

<Panel loader="bar" bind:loading="{loading}" filled={true}>
  <form class="form-horizontal" bind:this={form}> 
    <Row>
      <Col lg="12">
        <TextField
            label="Department #"
            readOnly=&#123;true}
            bind:value="{item.id}"
            md="1"
            />
      </Col>
    </Row>
    <Row>
      <Col lg="12">
        <TextField
            label="Department Name"
            validate={['length-range=6']} 
            required=&#123;true}
            bind:value="{item.name}"
            />
      </Col>
    </Row>
    <Row>
      <Col lg="12">
        <TextField
            label="Group Name"
            required=&#123;true}
            bind:value="{item.groupName}"
            />
      </Col>
    </Row>       
    <Row className="formfoot">
      <Col lg="12">
        <Col md="1" />
        <Button color="primary" on:click="{handleSubmit}">Submit</Button>
        <Button color="primary" on:click="{handleGoBack}">Back</Button>
      </Col>
      <Col lg="12">
        <!--<Spinner isActive={app.loading}/>-->
      </Col>
    </Row>
    <Row>
      <Col lg="12">
        <!--<InvoiceTable rows={rows} actions={actions} className="mdl-color--white" width={this.width - 40}/>-->
      </Col>
    </Row> 
  </form>
</Panel>